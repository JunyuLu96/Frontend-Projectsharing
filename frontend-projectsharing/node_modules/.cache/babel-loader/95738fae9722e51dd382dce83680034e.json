{"ast":null,"code":"import _toConsumableArray from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import CompanyService from\"../service/CompanyService\";import{Button,Col,Form,Input,message,Row}from\"antd\";import{InboxOutlined,PlusCircleOutlined}from\"@ant-design/icons\";import Dragger from\"antd/es/upload/Dragger\";import Divider from\"antd/es/divider\";import ContainerOutlined from\"@ant-design/icons/lib/icons/ContainerOutlined\";import List from\"antd/es/list\";import Skeleton from\"antd/es/skeleton\";import Avatar from\"antd/es/avatar\";import CompanyStudentModal from\"./CompanyStudentModal\";var CompanyProjectComponent=/*#__PURE__*/function(_Component){_inherits(CompanyProjectComponent,_Component);var _super=_createSuper(CompanyProjectComponent);function CompanyProjectComponent(props){var _this;_classCallCheck(this,CompanyProjectComponent);_this=_super.call(this,props);_this.finishProject=function(){CompanyService.finishCompany(_this.state.id).then(function(response){message.success(\"finished\");_this.setState({status:'finished'});}).catch(function(error){message.error(\"failed\");});};_this.refresh=function(){CompanyService.getProjectsById(_this.state.id).then(function(response){_this.setState({description:response.data.description,projectUrl:response.data.projectUrl,projectName:response.data.projectName,status:response.data.status});});CompanyService.getAppliedStudentsOfProject(_this.state.id).then(function(response){_this.setState({applicants:response.data});});};_this.handelNameChange=function(e){_this.setState({projectName:e.target.value});};_this.handelDescriptionChange=function(e){_this.setState({description:e.target.value});};_this.update=function(){var _this$state=_this.state,projectName=_this$state.projectName,description=_this$state.description,newFile=_this$state.newFile;var formData=new FormData();newFile.forEach(function(file){formData.append('file',file);});_this.setState({uploading:true});formData.append('projectName',projectName);formData.append('description',description);formData.append('projectId',_this.state.id);CompanyService.updateProject(formData).then(function(response){message.success(\"update successfully\");_this.setState({newFile:[],uploading:false});_this.refresh();}).catch(function(error){_this.setState({uploading:false});message.error('upload failed.');});_this.refresh();};_this.state={id:_this.props.match.params.id,description:'',fileList:'',projectUrl:'',projectName:'',status:'',applicants:[],newFile:[],refresh:'',uploading:false};return _this;}_createClass(CompanyProjectComponent,[{key:\"componentDidMount\",value:function componentDidMount(){this.refresh();}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,newFile=_this$state2.newFile,description=_this$state2.description,projectName=_this$state2.projectName,status=_this$state2.status,id=_this$state2.id,uploading=_this$state2.uploading;var props={onRemove:function onRemove(file){_this2.setState(function(state){var index=state.newFile.indexOf(file);var newFileList=state.newFile.slice();newFileList.splice(index,1);return{newFile:newFileList};});},beforeUpload:function beforeUpload(file){_this2.setState(function(state){return{newFile:[].concat(_toConsumableArray(state.newFile),[file])};});return false;},newFile:newFile,accept:\".doc, .docx, .pdf\"};return/*#__PURE__*/React.createElement(\"div\",{className:\"ant-card-bordered project-detail-container\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{layout:\"vertical\"},/*#__PURE__*/React.createElement(Row,{gutter:16},/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"Project Name\",label:\"Project Name\",rules:[{required:true,message:'Please enter project name'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Please enter project name\",value:projectName,onChange:this.handelNameChange.bind(this)}))),/*#__PURE__*/React.createElement(Col,{span:12,push:4},\"status: \",status,\" \\xA0\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{type:\"primary\",size:\"small\",onClick:this.finishProject},\"finish project\"))),/*#__PURE__*/React.createElement(Row,{gutter:16},/*#__PURE__*/React.createElement(Col,{span:24},/*#__PURE__*/React.createElement(Form.Item,{name:\"description\",label:\"Description\",rules:[{required:true,message:'description of the project'}]},/*#__PURE__*/React.createElement(Input.TextArea,{rows:4,placeholder:\"please enter the description\",value:description,onChange:this.handelDescriptionChange.bind(this)})))),/*#__PURE__*/React.createElement(Row,{gutter:[0,30]},/*#__PURE__*/React.createElement(\"a\",{href:this.state.projectUrl,className:\"resume-font\"},/*#__PURE__*/React.createElement(ContainerOutlined,null),\" \\xA0 detail.pdf\")),/*#__PURE__*/React.createElement(Row,{gutter:30},/*#__PURE__*/React.createElement(Col,{span:24},/*#__PURE__*/React.createElement(Dragger,props,/*#__PURE__*/React.createElement(\"p\",{className:\"ant-upload-drag-icon\"},/*#__PURE__*/React.createElement(InboxOutlined,null)),/*#__PURE__*/React.createElement(\"p\",{className:\"ant-upload-text\"},\"Click or drag file to this area to upload\"),/*#__PURE__*/React.createElement(\"p\",{className:\"ant-upload-hint\"},\"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files\")))),/*#__PURE__*/React.createElement(Row,{gutter:30},/*#__PURE__*/React.createElement(Col,{push:20},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{type:\"primary\",size:\"large\",onClick:this.update},uploading?'Uploading':'Start Upload')))))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(List,{className:\"demo-loadmore-list\",itemLayout:\"horizontal\",dataSource:this.state.applicants.sort(function(a,b){return a.student_id-b.student_id;}),renderItem:function renderItem(item){return/*#__PURE__*/React.createElement(List.Item,{actions:[/*#__PURE__*/React.createElement(\"a\",null,\"status: \",item.status),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(e){CompanyService.approveApplication(_this2.state.id,item.student_id).then(function(response){message.success(\"success\");_this2.refresh();}).catch(function(error){message.error(\"failed\");});}},\"accept\"),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(e){if(item.status==\"pending\"){CompanyService.rejectApplication(_this2.state.id,item.student_id).then(function(response){message.success(\"success\");_this2.refresh();}).catch(function(error){message.error(\"failed\");});}else{message.error(\"You can't decline a already approved or declined student\");}}},\"decline\")]},/*#__PURE__*/React.createElement(Skeleton,{avatar:true,title:false,loading:item.loading,active:true},/*#__PURE__*/React.createElement(List.Item.Meta,{avatar:/*#__PURE__*/React.createElement(Avatar,{src:item.student.iconUrl}),title:/*#__PURE__*/React.createElement(CompanyStudentModal,{student:item}),description:item.student.institution})));}}));}}]);return CompanyProjectComponent;}(Component);export default CompanyProjectComponent;","map":{"version":3,"sources":["/Users/luxx/Desktop/frontend-projectsharing/src/component/comapny/CompanyProjectComponent.js"],"names":["React","Component","CompanyService","Button","Col","Form","Input","message","Row","InboxOutlined","PlusCircleOutlined","Dragger","Divider","ContainerOutlined","List","Skeleton","Avatar","CompanyStudentModal","CompanyProjectComponent","props","finishProject","finishCompany","state","id","then","response","success","setState","status","catch","error","refresh","getProjectsById","description","data","projectUrl","projectName","getAppliedStudentsOfProject","applicants","handelNameChange","e","target","value","handelDescriptionChange","update","newFile","formData","FormData","forEach","file","append","uploading","updateProject","match","params","fileList","onRemove","index","indexOf","newFileList","slice","splice","beforeUpload","accept","required","bind","sort","a","b","student_id","item","approveApplication","rejectApplication","loading","student","iconUrl","institution"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport CompanyService from \"../service/CompanyService\";\nimport {Button, Col, Form, Input, message, Row} from \"antd\";\nimport {InboxOutlined, PlusCircleOutlined} from \"@ant-design/icons\";\nimport Dragger from \"antd/es/upload/Dragger\";\nimport Divider from \"antd/es/divider\";\nimport ContainerOutlined from \"@ant-design/icons/lib/icons/ContainerOutlined\";\nimport List from \"antd/es/list\";\nimport Skeleton from \"antd/es/skeleton\";\nimport Avatar from \"antd/es/avatar\";\nimport CompanyStudentModal from \"./CompanyStudentModal\";\n\nclass CompanyProjectComponent extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: this.props.match.params.id,\n            description: '',\n            fileList: '',\n            projectUrl: '',\n            projectName:'',\n            status:'',\n            applicants: [],\n            newFile:[],\n            refresh: '',\n            uploading: false,\n        }\n\n    }\n\n    finishProject =() => {\n        CompanyService.finishCompany(this.state.id).then(response => {\n            message.success(\"finished\")\n            this.setState({\n                status:'finished'\n            })\n        }).catch(error => {\n            message.error(\"failed\")\n        })\n    }\n\n    refresh= () => {\n        CompanyService.getProjectsById(this.state.id).then(response => {\n            this.setState({\n                description: response.data.description,\n                projectUrl:response.data.projectUrl,\n                projectName: response.data.projectName,\n                status: response.data.status,\n            })\n        })\n\n        CompanyService.getAppliedStudentsOfProject(this.state.id).then(response => {\n            this.setState({\n                applicants: response.data\n            })\n        });\n    }\n    componentDidMount() {\n        this.refresh();\n    }\n\n    handelNameChange = (e) => {\n        this.setState({\n            projectName: e.target.value\n        })\n    }\n\n    handelDescriptionChange = (e) => {\n        this.setState({\n            description: e.target.value\n        })\n    }\n\n    update = () => {\n        const {projectName, description, newFile} = this.state;\n        const formData = new FormData();\n        newFile.forEach(file => {\n            formData.append('file', file);\n        });\n        this.setState({\n            uploading: true,\n        });\n        formData.append('projectName', projectName);\n        formData.append('description', description);\n        formData.append('projectId', this.state.id);\n        CompanyService.updateProject(formData).then(response => {\n            message.success(\"update successfully\")\n            this.setState({\n                newFile: [],\n                uploading: false,\n            });\n            this.refresh();\n        }).catch(error => {\n            this.setState({\n                uploading: false,\n            })\n            message.error('upload failed.');\n        })\n        this.refresh();\n    };\n\n    render() {\n\n        const {newFile, description,projectName, status, id, uploading} = this.state;\n        const props = {\n\n            onRemove: file => {\n                this.setState(state => {\n                    const index = state.newFile.indexOf(file);\n                    const newFileList = state.newFile.slice();\n                    newFileList.splice(index, 1);\n                    return {\n                        newFile: newFileList,\n                    };\n                });\n            },\n            beforeUpload: file => {\n                this.setState(state => ({\n                    newFile: [...state.newFile, file],\n                }));\n                return false;\n            },\n            newFile,\n            accept: \".doc, .docx, .pdf\"\n        };\n\n        return (\n            <div className=\"ant-card-bordered project-detail-container\">\n                <br/><br/>\n                <div>\n                        <Form\n                            layout=\"vertical\"\n                        >\n                            <Row gutter={16}>\n                                <Col span={12}>\n\n                                    <Form.Item\n                                        name=\"Project Name\"\n                                        label=\"Project Name\"\n                                        rules={[\n                                            { required: true, message: 'Please enter project name' }\n                                        ]}\n                                    >\n\n                                        <Input placeholder=\"Please enter project name\" value={projectName} onChange={this.handelNameChange.bind(this)}/>\n                                    </Form.Item>\n                                </Col>\n                                <Col span={12} push={4}>\n                                    status: {status} &nbsp;\n                                    <br/>\n                                    <br/>\n                                    <Button type=\"primary\"  size=\"small\" onClick={this.finishProject}>\n                                        finish project\n                                    </Button>\n                                </Col>\n\n                            </Row>\n                            <Row gutter={16}>\n                                <Col span={24}>\n                                    <Form.Item\n                                        name=\"description\"\n                                        label=\"Description\"\n                                        rules={[\n                                            {\n                                                required: true,\n                                                message: 'description of the project',\n                                            },\n                                        ]}\n                                    >\n                                        <Input.TextArea rows={4} placeholder=\"please enter the description\" value={description}\n                                                        onChange={this.handelDescriptionChange.bind(this)}/>\n                                    </Form.Item>\n                                </Col>\n                            </Row>\n                            <Row gutter={[0, 30]}>\n                                <a href={this.state.projectUrl} className=\"resume-font\"><ContainerOutlined /> &nbsp; detail.pdf</a>\n                            </Row>\n                            <Row gutter={30}>\n                                <Col span={24}>\n                                    <Dragger {...props} >\n                                        <p className=\"ant-upload-drag-icon\">\n                                            <InboxOutlined />\n                                        </p>\n                                        <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\n                                        <p className=\"ant-upload-hint\">\n                                            Support for a single or bulk upload. Strictly prohibit from uploading company data or other\n                                            band files\n                                        </p>\n                                    </Dragger>\n                                </Col>\n\n                            </Row>\n                            <Row gutter={30}>\n                                <Col push={20}>\n                                    <Form.Item\n                                    >\n                                        <br/>\n                                        <br/>\n                                    <Button type=\"primary\" size=\"large\" onClick={this.update}>\n                                        {uploading ? 'Uploading' : 'Start Upload'}\n                                    </Button>\n                                </Form.Item>\n                                </Col>\n                            </Row>\n\n                        </Form>\n                </div>\n                <Divider />\n\n                <List\n                    className=\"demo-loadmore-list\"\n                    itemLayout=\"horizontal\"\n                    dataSource={this.state.applicants.sort((a,b) => a.student_id - b.student_id)}\n                    renderItem={item => (\n\n                            <List.Item\n\n                                actions={[<a>status: {item.status}</a>,\n                                    <a onClick={e => {\n                                        CompanyService.approveApplication(this.state.id, item.student_id).then(response => {\n                                            message.success(\"success\")\n                                            this.refresh();\n                                        }).catch(error => {\n                                            message.error(\"failed\")\n                                        })\n                                    }} >accept</a>, <a\n                                    onClick={e =>{\n                                        if (item.status == \"pending\") {\n                                            CompanyService.rejectApplication(this.state.id, item.student_id).then(response => {\n                                                message.success(\"success\")\n                                                this.refresh()\n                                            }).catch(error => {\n                                                message.error(\"failed\")\n                                            })\n                                        } else {\n                                            message.error(\"You can't decline a already approved or declined student\")\n                                        }\n                                    }}>decline</a>]}\n                            >\n\n                            <Skeleton avatar title={false} loading={item.loading} active>\n                                <List.Item.Meta\n                                    avatar={\n                                        <Avatar src={item.student.iconUrl} />\n                                    }\n                                    title={<CompanyStudentModal student={item} />}\n                                    description={item.student.institution}\n                                />\n\n                            </Skeleton>\n                        </List.Item>\n                    )}\n                    />\n            </div>\n        );\n    }\n}\n\nexport default CompanyProjectComponent;"]},"metadata":{},"sourceType":"module"}