{"ast":null,"code":"import _classCallCheck from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/luxx/Desktop/frontend-projectsharing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import TopNavBar from\"../TopNavBar\";import Divider from\"antd/es/divider\";import Button from\"antd/es/button\";import{Rate,message}from'antd';import PageHeader from\"antd/es/page-header\";import MainPageService from\"./MainPageService\";import{withRouter}from'react-router-dom';import AuthenticationService from\"../service/AuthenticationService\";import StudentService from\"../service/StudentService\";import jwt_decode from\"jwt-decode\";import{Link}from\"react-router-dom\";var ProjectDetailComponent=/*#__PURE__*/function(_Component){_inherits(ProjectDetailComponent,_Component);var _super=_createSuper(ProjectDetailComponent);function ProjectDetailComponent(props){var _this;_classCallCheck(this,ProjectDetailComponent);_this=_super.call(this,props);_this.state={id:_this.props.match.params.id,project:'',companyName:'',companyID:'',icon:'',companyRate:'',star:''};_this.applyProject=_this.applyProject.bind(_assertThisInitialized(_this));_this.showDetail=_this.showDetail.bind(_assertThisInitialized(_this));return _this;}_createClass(ProjectDetailComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;MainPageService.getProjectsById(this.props.match.params.id).then(function(response){if(response.data){_this2.setState({project:response.data.project,companyName:response.data.companyName,companyID:response.data.companyID,companyRate:response.data.companyRate,icon:response.data.icon});console.log(_this2.state.project);}MainPageService.getCompanyStarById(response.data.companyID).then(function(response){_this2.setState({star:response.data.RateStar});});}).catch(function(error){console.log(error);_this2.props.history.push(\"/\");});}},{key:\"applyProject\",value:function applyProject(){StudentService.applyProjectById(this.props.match.params.id).then(function(response){message.success(\"applied successfully\");}).catch(function(error){console.log(error);if(error.response.status===400){message.error(\"Project application cannot be submitted again!\");}});}},{key:\"showDetail\",value:function showDetail(){}},{key:\"render\",value:function render(){var date=new Date()-new Date(this.state.project.createTime);var day=Math.floor(date/(24*3600*1000));var mSecond=date%(24*3600*1000);var hours=Math.floor(mSecond/(3600*1000));var user=AuthenticationService.getCurrentUser();var role=null;if(user){var decode=jwt_decode(user.token);role=decode.role;}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TopNavBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"project-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"project-title\"},/*#__PURE__*/React.createElement(PageHeader,{className:\"site-page-header\",onBack:function onBack(){return window.history.back();},title:this.state.project.projectName,subTitle:\"click to back\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"project-detail ant-card-bordered\"},/*#__PURE__*/React.createElement(\"div\",{className:\"project-detail-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"project-detail-head-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"project-detail-head-title\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.icon,height:\"120px\",width:\"120px\",className:\"project-img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"project-title-right\"},/*#__PURE__*/React.createElement(\"h2\",null,this.state.project.projectName),/*#__PURE__*/React.createElement(\"span\",null,this.state.companyName),/*#__PURE__*/React.createElement(\"br\",null),day===0?/*#__PURE__*/React.createElement(\"span\",null,hours,\" hours ago\"):/*#__PURE__*/React.createElement(\"span\",null,day,\" days ago\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Rate,{disabled:true,value:this.state.star}))),/*#__PURE__*/React.createElement(\"div\",{className:\"project-apply\"},\" \",user?role===\"student\"?/*#__PURE__*/React.createElement(Button,{type:\"primary\",shape:\"round\",size:\"large\",onClick:this.applyProject},\"Apply\"):/*#__PURE__*/React.createElement(\"div\",null):/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",shape:\"round\",size:\"large\"},\"Login to Apply\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"project-clear\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"project-detail-body\"},/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"div\",{className:\"project-detail-content\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Project description\"),this.state.project.description,/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"button-detail\"},/*#__PURE__*/React.createElement(\"a\",{href:this.state.project.projectUrl},/*#__PURE__*/React.createElement(Button,{type:\"primary\",shape:\"round\",size:\"large\",onClick:this.showDetail},\" Detail\")))))));}}]);return ProjectDetailComponent;}(Component);export default withRouter(ProjectDetailComponent);","map":{"version":3,"sources":["/Users/luxx/Desktop/frontend-projectsharing/src/component/main/ProjectDetailComponent.js"],"names":["React","Component","TopNavBar","Divider","Button","Rate","message","PageHeader","MainPageService","withRouter","AuthenticationService","StudentService","jwt_decode","Link","ProjectDetailComponent","props","state","id","match","params","project","companyName","companyID","icon","companyRate","star","applyProject","bind","showDetail","getProjectsById","then","response","data","setState","console","log","getCompanyStarById","RateStar","catch","error","history","push","applyProjectById","success","status","date","Date","createTime","day","Math","floor","mSecond","hours","user","getCurrentUser","role","decode","token","window","back","projectName","description","projectUrl"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport TopNavBar from \"../TopNavBar\";\nimport Divider from \"antd/es/divider\";\nimport Button from \"antd/es/button\";\nimport { Rate, message } from 'antd';\nimport PageHeader from \"antd/es/page-header\";\nimport MainPageService from \"./MainPageService\";\nimport {withRouter} from 'react-router-dom';\nimport AuthenticationService from \"../service/AuthenticationService\";\nimport StudentService from \"../service/StudentService\";\nimport jwt_decode from \"jwt-decode\";\nimport {Link} from \"react-router-dom\";\n\nclass ProjectDetailComponent extends Component{\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            id: this.props.match.params.id,\n            project: '',\n            companyName: '',\n            companyID: '',\n            icon: '',\n            companyRate: '',\n            star: '',\n        }\n        this.applyProject = this.applyProject.bind(this);\n        this.showDetail = this.showDetail.bind(this);\n\n    }\n\n    componentDidMount() {\n        MainPageService.getProjectsById(this.props.match.params.id).then(response => {\n            if (response.data) {\n                this.setState({\n                    project: response.data.project,\n                    companyName: response.data.companyName,\n                    companyID: response.data.companyID,\n                    companyRate: response.data.companyRate,\n                    icon: response.data.icon,\n                })\n                console.log(this.state.project)\n            }\n            MainPageService.getCompanyStarById(response.data.companyID).then(response => {\n                this.setState({\n                  star: response.data.RateStar\n                })\n            })\n        }).catch(error => {\n            console.log(error)\n            this.props.history.push(`/`)\n        })\n    }\n\n    applyProject() {\n        StudentService.applyProjectById(this.props.match.params.id).then(response => {\n            message.success(\"applied successfully\")\n        }).catch(error => {\n            console.log(error)\n            if(error.response.status === 400) {\n                message.error(\"Project application cannot be submitted again!\")\n            }\n        })\n    }\n\n    showDetail() {\n\n    }\n\n    render() {\n\n        const date = new Date() - new Date(this.state.project.createTime);\n        const day = Math.floor(date/(24*3600*1000));\n        const mSecond = date%(24*3600*1000);\n        const hours=Math.floor(mSecond/(3600*1000))\n        const user = AuthenticationService.getCurrentUser();\n        let role = null\n        if (user) {\n            const decode = jwt_decode(user.token)\n            role = decode.role\n        }\n        return (\n            <div>\n                <TopNavBar />\n                <div className=\"project-container\">\n                    <div className=\"project-title\">\n                        <PageHeader\n                            className=\"site-page-header\"\n                            onBack={() => window.history.back()}\n                            title={this.state.project.projectName}\n                            subTitle=\"click to back\"\n\n                        />\n\n                    </div>\n                    <div className=\"project-detail ant-card-bordered\">\n                        <div className=\"project-detail-head\">\n                            <div className=\"project-detail-head-wrapper\" >\n                                <div className=\"project-detail-head-title\">\n                                    <img src={this.state.icon} height=\"120px\" width=\"120px\" className=\"project-img\"/>\n                                    <div className=\"project-title-right\">\n                                        <h2>{this.state.project.projectName}</h2>\n                                        <span>{this.state.companyName}</span><br/>\n                                        {day === 0? (\n                                            <span>\n                                                {hours} hours ago\n                                            </span>\n                                        ) : (\n                                            <span>\n                                                {day} days ago\n                                            </span>\n                                        )\n                                        }<br/>\n                                        <Rate disabled value={this.state.star} />\n                                    </div>\n                                </div>\n                                <div className=\"project-apply\"> {\n                                    user ?(\n                                        role === \"student\" ? (\n                                            <Button type=\"primary\" shape=\"round\" size=\"large\" onClick={this.applyProject}>\n                                                Apply\n                                            </Button>\n                                        ): (\n                                            <div>\n\n                                            </div>\n                                        )\n                                    ):(\n                                        <Link to='/login'>\n                                            <Button type=\"primary\" shape=\"round\" size=\"large\">\n                                                Login to Apply\n                                            </Button>\n                                        </Link>\n                                    )\n                                }\n                                </div>\n                                <div className=\"project-clear\"></div>\n                            </div>\n                        </div>\n\n                        <div className=\"project-detail-body\">\n                            <Divider />\n                            <div className=\"project-detail-content\">\n                                <h4>Project description</h4>\n                                {this.state.project.description}<br/>\n                            </div>\n                            <div className=\"button-detail\">\n                                {/*this.state.project.projectUrl*/}\n                                <a href={this.state.project.projectUrl}>\n                                   <Button type=\"primary\" shape=\"round\" size=\"large\" onClick={this.showDetail}> Detail</Button>\n                                </a>\n                            </div>\n                        </div>\n\n                    </div>\n\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(ProjectDetailComponent);"]},"metadata":{},"sourceType":"module"}